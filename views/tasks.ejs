<!DOCTYPE html>
<html>
<head>
  <title>Your Tasks</title>
</head>
<body>
  <h1>Your Tasks</h1>

  <p><a href="/dashboard">Back</a></p>
  <p><a href="/tasks/add">Add New Task</a></p>
  <p><a href="/logout">Logout</a></p>

  <table border="1" cellpadding="8">
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Due Date</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>

    <% tasks.forEach(t => { %>
      <tr>
        <td><%= t.title %></td>
        <td><%= t.description %></td>
        <td><%= t.dueDate ? t.dueDate.toISOString().slice(0,10) : "" %></td>
        <td><%= t.status %></td>
        <td>
          <form method="POST" action="/tasks/status/<%= t.id %>" style="display:inline;">
           <% if (t.status === "pending") { %>
          <input type="hidden" name="status" value="complete">
          <button type="submit">Complete</button>
            <% } else { %>
            <input type="hidden" name="status" value="pending">
           <button type="submit">Undo</button>
        <% } %>
         </form>


          <a href="/tasks/edit/<%= t.id %>">Edit</a>

          <form method="POST" action="/tasks/delete/<%= t.id %>" style="display:inline;">
            <button type="submit">Delete</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </table>
</body>
</html>
